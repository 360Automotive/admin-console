var V=Object.defineProperty;var W=(o,t,n)=>t in o?V(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n;var _=(o,t,n)=>(W(o,typeof t!="symbol"?t+"":t,n),n);import{j as S,o as m,r as h,m as z,R as x,u as f,a as $,L as Y,N as F,b as G,c as v,d as J,B as U}from"./vendor.4b3ecd14.js";const X=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const r of c.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function n(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerpolicy&&(c.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?c.credentials="include":a.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(a){if(a.ep)return;a.ep=!0;const c=n(a);fetch(a.href,c)}};X();const Q="_form_10o2l_10";var k={"login-page-container":"_login-page-container_10o2l_1",form:Q};const Z="_button_1pi6x_1";var L={button:Z,"button-small":"_button-small_1pi6x_12","button-medium":"_button-medium_1pi6x_15","button-large":"_button-large_1pi6x_18"};const e=S.exports.jsx,i=S.exports.jsxs,tt=({size:o,children:t})=>e("button",{className:`${L.button} ${L[`button-${o}`]}  `,children:t}),et="_vertical_6nweh_8",ot="_horizontal_6nweh_21";var w={"form-input-container":"_form-input-container_6nweh_1",vertical:et,horizontal:ot};const nt="_input_1jwqs_1";var st={input:nt};const at=({placeholder:o,type:t,onChange:n})=>e("input",{onChange:s=>n(s.target.value),type:t,placeholder:o,className:st.input}),rt="_label_r8cmx_1";var it={label:rt};const ct=({children:o,name:t})=>e("label",{htmlFor:t,className:it.label,children:o}),A=({type:o,name:t,label:n,placeholder:s,orientation:a,size:c,onChange:r})=>i("div",{className:`${w["form-input-container"]} ${a==="horizontal"?w.horizontal:w.vertical}`,children:[e(ct,{name:t,children:n}),e(at,{onChange:r,type:o,placeholder:s})]}),lt="_typography_8fog0_1";var q={typography:lt,"typography-h1":"_typography-h1_8fog0_6","typography-h2":"_typography-h2_8fog0_10","typography-h3":"_typography-h3_8fog0_14","typography-h4":"_typography-h4_8fog0_18","typography-display":"_typography-display_8fog0_22"};const l=({children:o,type:t})=>e("span",{className:`${q.typography} ${q[`typography-${t}`]}`,children:o}),ht=m(o=>{const[t,n]=h.exports.useState(""),[s,a]=h.exports.useState(""),c=r=>{r.preventDefault(),o.onLogin({email:t,password:s})};return e("div",{className:k["login-page-container"],children:i("form",{onSubmit:r=>c(r),className:k.form,action:"submit",children:[e(l,{type:"h1",children:"ADMIN CONSOLE"}),e(A,{onChange:n,name:"email",orientation:"vertical",label:"EMAIL"}),e(A,{onChange:a,type:"password",name:"password",orientation:"vertical",label:"PASSWORD"}),e(tt,{size:"large",children:"Login"})]})})}),ut="_container_144zs_1";var pt={container:ut};const dt="_status_psouj_1";var C={status:dt,"status-Active":"_status-Active_psouj_4"};const mt=({status:o})=>e("span",{className:`${C.status} ${C[`status-${o}`]}`,children:o}),gt=({name:o,status:t,manager:n,phone:s})=>i("div",{className:pt.container,children:[e(l,{type:"h3",children:o}),e(mt,{status:t}),e(l,{type:"h4",children:n}),e(l,{type:"h4",children:s})]}),_t="_page_22tc4_1";var O={page:_t,"page-title":"_page-title_22tc4_13"};const E=({children:o,title:t})=>i("div",{className:O.page,children:[e("div",{className:O["page-title"],children:e(l,{type:"h2",children:t})}),o]}),u={API_ENDPOINT:"https://limitless-fjord-99628.herokuapp.com/api/admin",TOKEN_KEY:"refreshToken"};class vt{constructor(t){_(this,"authenticated",!1);this.authService=t,z(this),this.authenticated=!!this.getAccessToken()}async login(t){try{const n=await this.authService.login(t);localStorage.setItem(u.TOKEN_KEY,n),this.setAuthenticated(!0)}catch{this.setAuthenticated(!1)}}setAuthenticated(t){t||localStorage.removeItem(u.TOKEN_KEY),this.authenticated=t}getAccessToken(){return localStorage.getItem(u.TOKEN_KEY)}isAuthenticated(){return this.authenticated}}class yt{async login(t){const n=await fetch(`${u.API_ENDPOINT}/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),s=await n.json();if(!n.ok)throw new Error(s);return s.adminToken}}class ft{constructor(t){_(this,"organizations");_(this,"requestList");this.organizationService=t,z(this),this.organizations=[],this.requestList=[]}async getOrganizations(){try{const t=await this.organizationService.getOrganizations();this.setOrganizations(t)}catch{this.setOrganizations([])}}async getRequestList(){try{const t=await this.organizationService.getRequestList();this.setRequestList(t)}catch{this.setRequestList([])}}async approveRequest(t){try{const n=await this.organizationService.approveRequest(t)}catch(n){console.log(n)}}runSnackbar(){const t=document.getElementById("snackbar");t==null||t.classList.add("slide-left"),t==null||t.classList.remove("slide-right")}setRequestList(t){this.requestList=t}setOrganizations(t){this.organizations=t}}class wt{async getOrganizations(){const t=await fetch(`${u.API_ENDPOINT}/organizations`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem(u.TOKEN_KEY)}`}}),n=await t.json();if(!t.ok)throw new Error(n);return n}async getRequestList(){const t=await fetch(`${u.API_ENDPOINT}/open-request`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem(u.TOKEN_KEY)}`}}),n=await t.json();if(!t.ok)throw new Error(n);return n}async approveRequest(t){const n=await fetch(`${u.API_ENDPOINT}/approve-request`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem(u.TOKEN_KEY)}`},body:JSON.stringify(t)}),s=await n.json();if(!n.ok)throw new Error(s);return s}}const Nt=new wt,bt=new ft(Nt),St=new yt,zt=new vt(St),g=x.createContext({authStore:zt,organizationStore:bt}),xt="_header_1lvp2_1";var $t={header:xt};const I=({columns:o})=>e("div",{className:$t.header,children:o.map((t,n)=>e(l,{type:"h3",children:t},n))}),kt=m(()=>{const{organizationStore:o}=h.exports.useContext(g);h.exports.useEffect(()=>{t()},[]);const t=async()=>{await o.getOrganizations()};return i(E,{title:"Customers",children:[e(I,{columns:["Shop Name","Status","Address","Phone Number"]}),o.organizations.map((n,s)=>e(gt,{name:n.company_name,status:"Active",manager:n.company_address,phone:n.company_phonenumber},s))]})}),Lt="_request_cgi3t_1";var R={request:Lt,"request-actions":"_request-actions_cgi3t_8"};const At="_action_it7p1_1";var j={action:At,"action-cancel":"_action-cancel_it7p1_8","action-approve":"_action-approve_it7p1_18"};const N=({children:o,type:t,onClick:n})=>e("button",{onClick:n,className:`${j.action} ${j[`action-${t}`]}`,children:o}),qt=({onApprove:o,name:t,taxId:n,phonenumber:s})=>i("div",{className:R.request,children:[e(l,{type:"h3",children:t}),e(l,{type:"h4",children:n}),e(l,{type:"h4",children:s}),e("div",{className:R["request-actions"],children:e(N,{onClick:o,type:"approve",children:"Approve"})})]}),Ct="_overlay_1ijl4_1",Ot="_modal_1ijl4_13";var p={overlay:Ct,modal:Ot,"modal-active":"_modal-active_1ijl4_24","modal-box":"_modal-box_1ijl4_29","modal-title":"_modal-title_1ijl4_40","modal-actions":"_modal-actions_1ijl4_46","modal-icon":"_modal-icon_1ijl4_51"};const T=({size:o,color:t})=>e("svg",{stroke:t,fill:t,strokeWidth:"0",viewBox:"0 0 24 24",height:o,width:o,xmlns:"http://www.w3.org/2000/svg",children:e("path",{fill:"none",stroke:t,strokeWidth:"2",d:"M3,3 L21,21 M3,21 L21,3"})}),Et=({visible:o,setVisible:t,onApprove:n,onCancel:s})=>i("div",{className:`${p.modal} ${o&&p["modal-active"]} `,children:[e("div",{onClick:()=>t(!1),className:p.overlay}),i("div",{className:p["modal-box"],children:[i("div",{className:p["modal-title"],children:[e(l,{type:"h3",children:"Request resolutions"}),e("div",{onClick:s,className:p["modal-icon"],children:e(T,{size:"1.4rem",color:"#fff"})})]}),e(l,{type:"display",children:"This action cannot be undone. Do you want to continue?"}),i("div",{className:p["modal-actions"],children:[e(N,{onClick:s,type:"cancel",children:"Cancel"}),e(N,{onClick:n,type:"approve",children:"Continue"})]})]})]}),It=m(()=>{const[o,t]=h.exports.useState(),[n,s]=h.exports.useState(!1),{organizationStore:a}=h.exports.useContext(g),c=f(),r=async()=>{await a.getOrganizations(),await a.getRequestList()};h.exports.useEffect(()=>{r()},[]);const M=d=>{t({companyId:d,isActive:!0}),s(!0)},K=async()=>{await a.approveRequest(o),s(!1),c("/console"),a.runSnackbar()},D=()=>{t(void 0),s(!1)};return i(E,{title:"Requests",children:[e(I,{columns:["Shop Name","TAX ID","Phone Number","Actions"]}),a.organizations.map(d=>a.requestList.map((b,H)=>d.id===b?e(qt,{name:d.company_name,taxId:d.company_tax_id,phonenumber:d.company_phonenumber,onApprove:()=>M(b)},H):void 0)),e(Et,{onApprove:K,onCancel:D,setVisible:s,visible:n})]})}),Rt="_sidebar_2sfdt_1";var jt={sidebar:Rt};const Tt=({size:o,color:t})=>e("svg",{stroke:t,fill:t,strokeWidth:"0",viewBox:"0 0 640 512",height:o,width:o,xmlns:"http://www.w3.org/2000/svg",children:e("path",{d:"M192 256c61.9 0 112-50.1 112-112S253.9 32 192 32 80 82.1 80 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C51.6 288 0 339.6 0 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zM480 256c53 0 96-43 96-96s-43-96-96-96-96 43-96 96 43 96 96 96zm48 32h-3.8c-13.9 4.8-28.6 8-44.2 8s-30.3-3.2-44.2-8H432c-20.4 0-39.2 5.9-55.7 15.4 24.4 26.3 39.7 61.2 39.7 99.8v38.4c0 2.2-.5 4.3-.6 6.4H592c26.5 0 48-21.5 48-48 0-61.9-50.1-112-112-112z"})}),Pt=({size:o,color:t})=>i("svg",{stroke:t,fill:t,strokeWidth:"0",viewBox:"0 0 24 24",height:o,width:o,xmlns:"http://www.w3.org/2000/svg",children:[e("path",{fill:"none",d:"M0 0h24v24H0z"}),e("path",{d:"M17 12c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm1.65 7.35L16.5 17.2V14h1v2.79l1.85 1.85-.7.71zM18 3h-3.18C14.4 1.84 13.3 1 12 1s-2.4.84-2.82 2H6c-1.1 0-2 .9-2 2v15c0 1.1.9 2 2 2h6.11a6.743 6.743 0 01-1.42-2H6V5h2v3h8V5h2v5.08c.71.1 1.38.31 2 .6V5c0-1.1-.9-2-2-2zm-6 2c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z"})]}),Bt="_link_1mi5x_1",Mt="_option_1mi5x_5";var y={link:Bt,option:Mt,"option-icon":"_option-icon_1mi5x_19","option-active":"_option-active_1mi5x_22"};const P=({icon:o,name:t,to:n})=>{const s=$(),{pathname:a}=s;return e(Y,{className:y.link,to:n,children:i("div",{className:`${y.option} ${a===n&&y["option-active"]} `,children:[e("div",{className:y["option-icon"],children:o}),e(l,{type:"h4",children:t})]})})},Kt="_logo_1l26j_1";var Dt={logo:Kt};const Ht=()=>e("div",{className:Dt.logo,children:e("img",{src:"https://res.cloudinary.com/redlineinventory/image/upload/v1644541996/logo_rs54no.png"})}),Vt=({color:o,size:t})=>e("svg",{stroke:o,fill:o,strokeWidth:"0",viewBox:"0 0 24 24",height:t,width:t,xmlns:"http://www.w3.org/2000/svg",children:i("g",{children:[e("path",{fill:"none",d:"M0 0h24v24H0z"}),e("path",{d:"M4 18h2v2h12V4H6v2H4V3a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3zm2-7h7v2H6v3l-5-4 5-4v3z"})]})}),Wt="_logout_1xs3i_1";var Yt={logout:Wt};const Ft=m(({onClick:o})=>{const{authStore:t}=h.exports.useContext(g),n=f();return i("div",{className:Yt.logout,onClick:()=>{t.setAuthenticated(!1),n("/")},children:[e("div",{className:"logout-icon",children:e(Vt,{size:"1.8rem",color:"#fff"})}),e("span",{children:"Logout"})]})}),Gt=()=>i("div",{className:jt.sidebar,children:[e(Ht,{}),e(P,{to:"/console",icon:e(Tt,{size:"1.8rem",color:"white"}),name:"Customers"}),e(P,{to:"/request",icon:e(Pt,{size:"1.8rem",color:"white"}),name:"Request"}),e(Ft,{})]}),Jt=()=>h.exports.useContext(g).authStore.isAuthenticated(),B=({children:o})=>{const t=Jt();let n=$();return t?o:e(F,{to:"/login",state:{from:n},replace:!0})},Ut=()=>e("div",{className:"no-match"}),Xt="_snackbar_1ln73_1";var Qt={snackbar:Xt};const Zt=({size:o,color:t})=>i("svg",{stroke:t,fill:t,strokeWidth:"0",viewBox:"0 0 16 16",height:o,width:o,xmlns:"http://www.w3.org/2000/svg",children:[e("path",{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"}),e("path",{d:"M10.97 4.97a.235.235 0 0 0-.02.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-1.071-1.05z"})]}),te=({className:o,onClose:t})=>i("div",{id:"snackbar",className:`${Qt.snackbar} ${o}`,children:[e(Zt,{size:"1.8rem",color:"#81ce81"}),e(l,{type:"display",children:"Request was approved successfully"}),e("div",{onClick:t,children:e(T,{size:"1.4rem",color:"#FFF"})})]}),ee=m(o=>{const t=f(),{authStore:n}=h.exports.useContext(g),s=n.isAuthenticated();return i("div",{className:"App",children:[s&&e(Gt,{}),i(G,{children:[!s&&e(v,{path:"/",element:e(ht,{onLogin:async r=>{await n.login(r),t("/console")}})}),e(v,{path:"/console",element:e(B,{children:e(kt,{})})}),e(v,{path:"/request",element:e(B,{children:e(It,{})})}),e(v,{path:"*",element:e(Ut,{})})]}),e(te,{onClose:()=>{const r=document.getElementById("snackbar");r==null||r.classList.add("slide-right"),r==null||r.classList.remove("slide-left")}})]})});J.render(e(U,{children:e(x.StrictMode,{children:e(ee,{})})}),document.getElementById("root"));
